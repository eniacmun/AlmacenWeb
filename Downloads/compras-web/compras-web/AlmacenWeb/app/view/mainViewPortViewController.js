/*
 * File: app/view/mainViewPortViewController.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('almacen.view.mainViewPortViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.mainviewport',

    control: {
        "button#btnCompra": {
            click: 'loadCompras'
        },
        "button#btnCedis": {
            click: 'loadCedis'
        },
        "button#btnInventarios": {
            click: 'loadConsultaInventario'
        },
        "button#btnProduccion": {
            click: 'loadProducciones'
        },
        "button#btnAjuste": {
            click: 'loadAjustes'
        },
        "button#btnMerma": {
            click: 'loadMermas'
        },
        "button#btnSupervision": {
            click: 'loadSupervision'
        },
        "button#btnTransferencia": {
            click: 'loadTransferencia'
        },
        "button#btnLogout": {
            click: 'Logout'
        },
        "button#btnPedidos": {
            click: 'loadPedidos'
        }
    },

    loadCompras: function(button, e, eOpts) {
                this.loadPanel("panelcompras");
    },

    loadCedis: function(button, e, eOpts) {

                this.loadPanel("panelCedis");


               /* var tb = Ext.create('almacen.view.tbReportes');
                Ext.ComponentMgr.get("tbDynInventarios").add(tb);
                Ext.ComponentMgr.get("tbDynInventarios").updateLayout();*/
    },

    loadConsultaInventario: function(button, e, eOpts) {
                 window.tipoInvenario = 0;

                this.loadPanel("panelInventarios");
    },

    loadProducciones: function(button, e, eOpts) {
        //window.alert("cargar producciones");
        if (almacen.getApplication().currentSession.habilitaProduccionesTrazabilidad){
            //habilita la carga de los usuarios
            this.loadPanel("produccionesTras");
        }
        else
            this.loadPanel("producciones");

    },

    loadAjustes: function(button, e, eOpts) {
        window.tipoInvenario = 1;
        this.loadPanel("panelInventarios");
        var tb = Ext.create('almacen.view.tbAjustes');
        Ext.ComponentMgr.get("tbDynInventarios").add(tb);
        Ext.ComponentMgr.get("tbDynInventarios").updateLayout();
    },

    loadMermas: function(button, e, eOpts) {
        window.tipoInvenario = 2;
        this.loadPanel("panelInventarios");
                var tb = Ext.create('almacen.view.tbMermas');
                Ext.ComponentMgr.get("tbDynInventarios").add(tb);
                Ext.ComponentMgr.get("tbDynInventarios").updateLayout();
    },

    loadSupervision: function(button, e, eOpts) {
        window.tipoInvenario = 3;
        this.loadPanel("panelInventarios");
        var tb = Ext.create('almacen.view.tbSupervision');
        Ext.ComponentMgr.get("tbDynInventarios").add(tb);
        Ext.ComponentMgr.get("tbDynInventarios").updateLayout();
    },

    loadTransferencia: function(button, e, eOpts) {
        window.tipoInvenario = 4;
        this.loadPanel("panelInventarios");
        var tb = Ext.create('almacen.view.tbTransferencia');
        Ext.ComponentMgr.get("tbDynInventarios").add(tb);
        Ext.ComponentMgr.get("tbDynInventarios").updateLayout();
    },

    Logout: function(button, e, eOpts) {
                window.location.reload();
    },

    loadPedidos: function(button, e, eOpts) {
        console.log('loadPedidos');
        this.loadPanel("DlgPedidos");
        //var wnd=Ext.create("almacen.view.DlgPedidos", {id:"wndRegistroPedidos"});
        //wnd.parentController=this;
        //wnd.center();
        //wnd.show();

    },

    loadPanel: function(className) {
        //window.alert('almacen.view.'+className);
        var viewport = Ext.ComponentQuery.query("viewport")[0];

        //window.alert(centerPanel);
        var centerPanel = viewport.down("[region=center]");
        centerPanel.removeAll();
        var panel = Ext.create('almacen.view.'+className, {id:"currentView"});
        centerPanel.add(panel);
        centerPanel.updateLayout();
        viewport.updateLayout();
        return panel;
    }

});
