/*
 * File: app/view/panelInventarios.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('almacen.view.panelInventarios', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.panelInventarios',

    requires: [
        'almacen.view.panelInventariosViewModel',
        'almacen.view.panelInventariosViewController',
        'Ext.grid.Panel',
        'Ext.grid.View',
        'Ext.grid.filters.filter.List',
        'Ext.grid.filters.filter.String',
        'Ext.grid.column.Number',
        'Ext.form.field.Number',
        'Ext.grid.filters.filter.Number',
        'Ext.grid.filters.Filters',
        'Ext.grid.column.Boolean',
        'Ext.grid.filters.filter.Boolean',
        'Ext.grid.plugin.CellEditing',
        'Ext.toolbar.Toolbar',
        'Ext.form.field.ComboBox',
        'Ext.form.field.Checkbox',
        'Ext.button.Button'
    ],

    controller: 'panelinventarios',
    viewModel: {
        type: 'panelinventarios'
    },
    height: 600,
    width: 1286,
    layout: 'border',
    manageHeight: false,
    title: 'Inventarios',
    defaultListenerScope: true,

    items: [
        {
            xtype: 'gridpanel',
            flex: 0,
            region: 'center',
            id: 'gridConsultaClasificaciones',
            frameHeader: false,
            header: false,
            title: 'My Grid Panel',
            forceFit: true,
            store: 'StoreInventarios',
            viewConfig: {
                getRowClass: function(record, rowIndex, rowParams, store) {

                    var style = "";
                    if(almacen.getApplication().currentSession.subAlmacenes && window.tipoInvenario == 4){
                        if(!record.get("editable")){
                            style = "no-editable";
                        }
                    }
                    return style;
                },
                frame: false,
                emptyText: 'Sin información'
            },
            columns: [
                {
                    xtype: 'gridcolumn',
                    hidden: true,
                    width: 81,
                    dataIndex: 'Clasificacion',
                    lockable: false,
                    locked: true,
                    text: 'Clasificación',
                    filter: {
                        type: 'list'
                    }
                },
                {
                    xtype: 'gridcolumn',
                    hidden: true,
                    width: 81,
                    dataIndex: 'proveedorMateria',
                    lockable: false,
                    locked: true,
                    text: 'Proveedor',
                    filter: {
                        type: 'list'
                    }
                },
                {
                    xtype: 'gridcolumn',
                    maxWidth: 120,
                    minWidth: 120,
                    defaultWidth: 120,
                    dataIndex: 'Clave',
                    locked: true,
                    text: 'Clave',
                    filter: {
                        type: 'string',
                        emptyText: 'Filtrar Clave'
                    }
                },
                {
                    xtype: 'gridcolumn',
                    minWidth: 250,
                    width: 250,
                    dataIndex: 'Concepto',
                    locked: true,
                    text: 'Concepto',
                    filter: {
                        type: 'string'
                    }
                },
                {
                    xtype: 'gridcolumn',
                    maxWidth: 140,
                    minWidth: 120,
                    defaultWidth: 140,
                    dataIndex: 'Unidad',
                    text: 'Unidad',
                    filter: {
                        type: 'list'
                    }
                },
                {
                    xtype: 'numbercolumn',
                    maxWidth: 180,
                    minWidth: 110,
                    defaultWidth: 110,
                    align: 'right',
                    dataIndex: 'Existencia',
                    text: 'Existencia',
                    editor: {
                        xtype: 'numberfield',
                        itemId: 'mynumberfield7',
                        selectOnFocus: true,
                        decimalPrecision: 4
                    }
                },
                {
                    xtype: 'gridcolumn',
                    maxWidth: 140,
                    minWidth: 120,
                    defaultWidth: 140,
                    dataIndex: 'Unidad1',
                    text: 'Unidad 1',
                    filter: {
                        type: 'list'
                    }
                },
                {
                    xtype: 'numbercolumn',
                    hidden: true,
                    id: 'Equivalencia1',
                    maxWidth: 180,
                    minWidth: 180,
                    defaultWidth: 180,
                    align: 'right',
                    dataIndex: 'Equivalencia1',
                    text: 'Equivalencia 1',
                    editor: {
                        xtype: 'numberfield',
                        selectOnFocus: true,
                        decimalPrecision: 4
                    }
                },
                {
                    xtype: 'numbercolumn',
                    id: 'Existencia1',
                    maxWidth: 180,
                    minWidth: 110,
                    defaultWidth: 110,
                    align: 'right',
                    dataIndex: 'Existencia1',
                    text: 'Existencia 1',
                    editor: {
                        xtype: 'numberfield',
                        selectOnFocus: true,
                        decimalPrecision: 4,
                        nanText: '0'
                    }
                },
                {
                    xtype: 'gridcolumn',
                    maxWidth: 140,
                    minWidth: 120,
                    defaultWidth: 140,
                    dataIndex: 'Unidad2',
                    text: 'Unidad 2',
                    filter: {
                        type: 'list'
                    }
                },
                {
                    xtype: 'numbercolumn',
                    hidden: true,
                    id: 'Equivalencia2',
                    maxWidth: 180,
                    minWidth: 180,
                    defaultWidth: 180,
                    align: 'right',
                    dataIndex: 'Equivalencia2',
                    text: 'Equivalencia 2',
                    editor: {
                        xtype: 'numberfield',
                        selectOnFocus: true,
                        decimalPrecision: 4
                    }
                },
                {
                    xtype: 'numbercolumn',
                    maxWidth: 180,
                    minWidth: 110,
                    defaultWidth: 110,
                    align: 'right',
                    dataIndex: 'Existencia2',
                    text: 'Existencia 2',
                    editor: {
                        xtype: 'numberfield',
                        itemId: 'mynumberfield7',
                        selectOnFocus: true,
                        decimalPrecision: 4,
                        nanText: '0'
                    }
                },
                {
                    xtype: 'gridcolumn',
                    maxWidth: 180,
                    minWidth: 150,
                    defaultWidth: 150,
                    align: 'right',
                    dataIndex: 'Total',
                    text: 'Total'
                },
                {
                    xtype: 'numbercolumn',
                    maxWidth: 180,
                    minWidth: 130,
                    defaultWidth: 130,
                    align: 'right',
                    dataIndex: 'Costo',
                    text: 'Costo',
                    filter: {
                        type: 'number',
                        emptyText: 'Filtrar Costo'
                    }
                },
                {
                    xtype: 'booleancolumn',
                    dataIndex: 'InventarioDiario',
                    text: 'Inventario Diario',
                    falseText: 'No',
                    trueText: 'Si',
                    filter: {
                        type: 'boolean',
                        yesText: 'Si'
                    }
                }
            ],
            plugins: [
                {
                    ptype: 'gridfilters',
                    menuFilterText: 'Filtrar'
                },
                {
                    ptype: 'cellediting',
                    clicksToEdit: 1,
                    listeners: {
                        beforeedit: 'BeforeEdit',
                        edit: 'AfterEdit'
                    }
                }
            ],
            listeners: {
                beforerender: {
                    fn: 'onGridConsultaClasificacionesBeforeRender',
                    scope: 'controller'
                }
            }
        },
        {
            xtype: 'panel',
            region: 'south',
            height: 50,
            title: '',
            titleCollapse: false,
            layout: {
                type: 'border',
                regionWeights: {
                    north: 20,
                    south: 10,
                    center: 0,
                    west: -5,
                    east: -20
                }
            },
            items: [
                {
                    xtype: 'toolbar',
                    region: 'west',
                    id: 'tbInventarios',
                    width: 850,
                    items: [
                        {
                            xtype: 'combobox',
                            id: 'cmbClasificaciones',
                            fieldLabel: '',
                            hideLabel: true,
                            editable: false,
                            emptyText: 'Seleccione clasificación',
                            displayField: 'label',
                            queryMode: 'local',
                            store: 'StoreGeneric',
                            valueField: 'value'
                        },
                        {
                            xtype: 'combobox',
                            hidden: true,
                            id: 'cmbProveedoresMateria',
                            fieldLabel: '',
                            hideLabel: true,
                            editable: false,
                            emptyText: 'Seleccione proveedor',
                            displayField: 'label',
                            queryMode: 'local',
                            store: 'StoreProveedorMateria',
                            valueField: 'value',
                            listeners: {
                                beforerender: {
                                    fn: 'onCmbProveedoresMateriaBeforeRender',
                                    scope: 'controller'
                                },
                                change: {
                                    fn: 'onCmbProveedoresMateriaChange',
                                    scope: 'controller'
                                }
                            }
                        },
                        {
                            xtype: 'combobox',
                            hidden: true,
                            id: 'cmbSubAlmacenes',
                            fieldLabel: '',
                            hideLabel: true,
                            editable: false,
                            emptyText: 'Seleccione almacén',
                            displayField: 'label',
                            queryMode: 'local',
                            store: 'StoreSubAlmacen',
                            valueField: 'value',
                            listeners: {
                                beforerender: {
                                    fn: 'onCmbSubAlmacenBeforeRender',
                                    scope: 'controller'
                                },
                                change: {
                                    fn: 'onCmbSubAlmacenesChange',
                                    scope: 'controller'
                                }
                            }
                        },
                        {
                            xtype: 'combobox',
                            hidden: true,
                            id: 'cmbSubAlmacenes1',
                            fieldLabel: '',
                            hideLabel: true,
                            editable: false,
                            emptyText: 'Seleccione almacén',
                            displayField: 'label',
                            queryMode: 'local',
                            store: 'StoreSubAlmacen',
                            valueField: 'value',
                            listeners: {
                                beforerender: {
                                    fn: 'onCmbSubAlmacenBeforeRender1',
                                    scope: 'controller'
                                },
                                change: {
                                    fn: 'onCmbSubAlmacenesChange1',
                                    scope: 'controller'
                                }
                            }
                        },
                        {
                            xtype: 'checkboxfield',
                            id: 'chkIdiario',
                            fieldLabel: '',
                            boxLabel: 'Inventario Diario'
                        },
                        {
                            xtype: 'button',
                            id: 'btnConsultar',
                            icon: 'resources/filter.gif',
                            text: 'Consultar'
                        },
                        {
                            xtype: 'button',
                            id: 'btnPrint',
                            icon: 'resources/print.png',
                            text: 'Imprimir'
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    region: 'center',
                    id: 'tbDynInventarios',
                    frameHeader: false,
                    header: false,
                    title: 'My Panel'
                }
            ]
        }
    ],

    BeforeEdit: function(editor, context, eOpts) {
        return window.InventariosBeforeEdit(editor, context, eOpts);
    },

    AfterEdit: function(editor, context, eOpts) {
        return window.InventariosAfterEdit(editor, context, eOpts);
    }

});